<% t = SciolyFF::Helper.new(data[tournament]) %>

<div class="card container mt-5 pt-5" style="overflow: auto">
<table class="results-classic">
  <tr>
    <th class="number">#</th>
    <th class="school">School</th>
    <th class="rank">Rank</th>
    <th class="total-points">Total</th>
  <% t.events_by_name.values.sort do |a, b|
       if a[:trial] && !b[:trial] then 1
       elsif !a[:trial] && b[:trial] then -1
       else a[:name] <=> b[:name]
       end
     end.each do |e| %>
    <th class="event-points"><%= e[:name] %></th>
  <% end %>
  </tr>
<% t.sort_teams_by_rank.each.with_index do |tm, i| %>
  <tr>
    <td class="number"><%= tm[:number] %></td>
    <td class="school"><%= tm[:school] %></td>
    <td class="rank"><%= i + 1 %></td>
    <td class="total-points"><%= t.team_points tm[:number] %></td>
  <% t.events_by_name.values.sort do |a, b|
       if a[:trial] && !b[:trial] then 1
       elsif !a[:trial] && b[:trial] then -1
       else a[:name] <=> b[:name]
       end
     end.each do |e| %>
    <td class="event-points"><%= t.event_points tm[:number], e[:name] %></td>
  <% end %>
  </tr>
<% end %>
</table>
</div>
